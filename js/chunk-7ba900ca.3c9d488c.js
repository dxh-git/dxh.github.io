(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ba900ca"],{2165:function(t,a,n){"use strict";var e=n("4ffe"),s=n.n(e);s.a},"34a6":function(t,a,n){"use strict";var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"listbar"},[n("router-link",{attrs:{to:t.path||"#"}},[n("div",[t._v(t._s(t.left)+" ")]),n("div",[n("span",[t._v(t._s(t.right))]),n("span",{staticClass:"iconfont iconjiantou1"})])])],1)},s=[],o={props:["left","right","path"]},i=o,r=(n("b7d0"),n("2877")),c=Object(r["a"])(i,e,s,!1,null,"2e4ea19c",null);a["a"]=c.exports},"45b7":function(t,a,n){"use strict";var e=n("8dbc"),s=n.n(e);s.a},"4ffe":function(t,a,n){},"8dbc":function(t,a,n){},b7d0:function(t,a,n){"use strict";var e=n("d7ed"),s=n.n(e);s.a},d178:function(t,a,n){"use strict";var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"w"},[n("div",{staticClass:"nev"},[n("span",{staticClass:"iconfont iconjiantou2",on:{click:function(a){return t.$router.back()}}}),n("strong",[t._v(t._s(t.title))]),t.showHome?n("span",{staticClass:"iconfont iconshouye",on:{click:function(a){return t.$router.push("/index")}}}):n("span",{staticClass:"iconfont iconshouye",staticStyle:{opacity:"0"}})])])},s=[],o={props:["title","showHome"]},i=o,r=(n("2165"),n("2877")),c=Object(r["a"])(i,e,s,!1,null,"60a28f66",null);a["a"]=c.exports},d7ed:function(t,a,n){},fb5e:function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"w"},[n("Navbar",{attrs:{title:"编辑",showHome:""}}),n("div",{staticClass:"avater"},[n("img",{attrs:{src:t.$axios.defaults.baseURL+t.userInfo.head_img}}),n("van-uploader",{staticClass:"uploader",attrs:{"after-read":t.afterRead}})],1),n("Listbar",{attrs:{left:"昵称",right:t.userInfo.nickname},nativeOn:{click:function(a){t.show=!0}}}),n("van-dialog",{attrs:{title:"编辑昵称","show-cancel-button":""},on:{confirm:t.handleNicknaem},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[n("van-field",{attrs:{placeholder:"请输入昵称"},model:{value:t.nickname,callback:function(a){t.nickname=a},expression:"nickname"}})],1),n("Listbar",{attrs:{left:"密码",right:"***"},nativeOn:{click:function(a){t.showPassword=!0}}}),n("van-dialog",{attrs:{title:"编辑密码","show-cancel-button":""},on:{confirm:t.handlePassword},model:{value:t.showPassword,callback:function(a){t.showPassword=a},expression:"showPassword"}},[n("van-field",{attrs:{placeholder:"输入密码"},model:{value:t.password,callback:function(a){t.password=a},expression:"password"}})],1),n("Listbar",{attrs:{left:"性别",right:["女","男"][t.userInfo.gender]},nativeOn:{click:function(a){t.showGender=!0}}}),n("van-action-sheet",{attrs:{"close-on-click-action":"",actions:t.actions},on:{select:t.onSelect},model:{value:t.showGender,callback:function(a){t.showGender=a},expression:"showGender"}})],1)},s=[],o=n("d178"),i=n("34a6"),r={data:function(){return{userJson:{},userInfo:{},show:!1,showPassword:!1,showGender:!1,actions:[{name:"女",value:"0"},{name:"男",value:"1"}],nickname:"",password:""}},components:{Navbar:o["a"],Listbar:i["a"]},mounted:function(){var t=this,a=JSON.parse(localStorage.getItem("userInfo"));console.log(a.data.user.id),this.userJson=a,this.$axios({url:"/user/"+a.data.user.id,headers:{Authorization:a.data.token}}).then((function(a){t.userInfo=a.data.data,console.log(t.userInfo),t.nickname=t.userInfo.nickname}))},methods:{afterRead:function(t){var a=this,n=new FormData;n.append("file",t.file),this.$axios({method:"post",url:"/upload",headers:{Authorization:this.userJson.data.token},data:n}).then((function(t){var n=t.data.data.url;a.userInfo.head_img=n,a.handleEdit({head_img:n})}))},handleEdit:function(t){var a=this;return this.$axios({url:"/user_update/"+this.userJson.data.user.id,method:"post",headers:{Authorization:this.userJson.data.token},data:t}).then((function(t){a.$toast.success("修改成功")}))},handleNicknaem:function(){var t=this,a=this.handleEdit({nickname:this.nickname});a.then((function(){t.userInfo.nickname=t.nickname}))},handlePassword:function(){this.handleEdit({password:this.password})},onSelect:function(t){var a=this;console.log(t.value);var n=this.handleEdit({gender:t.value});n.then((function(){a.userInfo.gender=t.value}))}}},c=r,l=(n("45b7"),n("2877")),u=Object(l["a"])(c,e,s,!1,null,"4b3b705a",null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-7ba900ca.3c9d488c.js.map