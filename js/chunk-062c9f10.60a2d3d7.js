(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-062c9f10"],{2165:function(t,e,n){"use strict";var a=n("4ffe"),s=n.n(a);s.a},"498a":function(t,e,n){"use strict";var a=n("23e7"),s=n("58a8").trim,i=n("c8d2");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return s(this)}})},"4ffe":function(t,e,n){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("1d80"),s=n("5899"),i="["+s+"]",o=RegExp("^"+i+i+"*"),r=RegExp(i+i+"*$"),c=function(t){return function(e){var n=String(a(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(r,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},"7c90":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Navbar",{attrs:{title:"精彩跟帖"}}),n("van-list",{attrs:{finished:t.finished,"immediate-check":!1,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.data,(function(e,a){return n("div",{key:a,staticClass:"comment"},[n("div",{staticClass:"comment-top"},[n("div",{staticClass:"user"},[n("img",{attrs:{src:t.$axios.defaults.baseURL+e.user.head_img}}),n("div",{staticClass:"user-info"},[n("p",[t._v(t._s(e.user.nickname))]),n("span",[t._v(t._s(t.moment(e.create_date).fromNow()))])])]),n("span",{on:{click:function(n){return t.handleReply(e)}}},[t._v("回复")])]),e.parent?n("CommentFloot",{attrs:{data:e.parent},on:{reply:t.handleReply}}):t._e(),n("div",{staticClass:"content"},[t._v(" "+t._s(e.content)+" ")])],1)})),0),n("div",{staticClass:"publist"},[n("van-field",{ref:"textarea",staticClass:"textarea",class:t.isFocus?"active":"",attrs:{rows:t.rows,autosize:!t.isFocus,type:"textarea",placeholder:t.reply.user?"回复：@"+t.reply.user.nickname:"说点什么"},on:{focus:t.handleFocus,blur:t.handleBlur,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit(e)}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t.isFocus?n("span",{staticClass:"submit",on:{click:t.handleSubmit}},[t._v("发不")]):t._e()],1)],1)},s=[],i=(n("99af"),n("498a"),n("2909")),o=n("c1df"),r=n.n(o),c=n("d178"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"comment-floor"},[t.data.parent?n("commentFloor",{attrs:{data:t.data.parent},on:{reply:t.handleReply}}):t._e(),n("div",{staticClass:"floor-top"},[n("div",{staticClass:"user"},[n("em",[t._v(t._s(t.data.user.nickname))]),n("span",[t._v(t._s(t.moment(t.data.create_date).fromNow()))])]),n("span",{on:{click:function(e){return t.handleReply(t.data)}}},[t._v(" 回复")])]),n("div",{staticClass:"content"},[t._v(" "+t._s(t.data.content)+" ")])],1)])},l=[],d={name:"commentFloor",data:function(){return{moment:r.a}},props:["data","count"],methods:{handleReply:function(t){this.$emit("reply")}}},f=d,p=(n("ea77"),n("2877")),m=Object(p["a"])(f,u,l,!1,null,"5410f89e",null),h=m.exports;r.a.locale("zh-CN");var v={data:function(){return{id:"",data:[],moment:r.a,finished:!1,loading:!1,pageIndex:1,pageSize:5,message:"",rows:1,isFocus:!1,reply:{}}},components:{Navbar:c["a"],CommentFloot:h},mounted:function(){var t=this.$route.params.id;this.id=t,this.getList()},methods:{getList:function(){var t=this;this.$axios({url:"/post_comment/"+this.id,params:{pageIndex:this.pageIndex,pageSize:this.pageSize}}).then((function(e){var n=e.data.data;t.data=[].concat(Object(i["a"])(t.data),Object(i["a"])(n)),t.pageIndex+=1,t.loading=!1,n.length<t.pageSize&&(t.finished=!0)}))},onLoad:function(){this.getList(),console.log(222),this.finished=!0},handleFocus:function(){this.isFocus=!0},handleBlur:function(){var t=this;setTimeout((function(){t.isFocus=!1}),100)},handleSubmit:function(){var t=this;if(console.log("发布"),""!==this.message.trim()){var e=JSON.parse(localStorage.getItem("userInfo")).data||{},n=e.token;console.log(n);var a={content:this.message};this.reply.id&&(a.parent_id=this.reply.id),this.$axios({url:"/post_comment/"+this.id,method:"post",headers:{Authorization:n},data:a}).then((function(e){t.message="",t.$toast.success("发布成功"),t.data=[],t.pageIndex=1,t.getList()})),console.log("发布2",this.message)}},handleReply:function(t){var e=this;setTimeout((function(){e.reply=t,e.isFocus=!0,e.$refs.textarea.focus()}),200)}}},g=v,_=(n("9603"),Object(p["a"])(g,a,s,!1,null,"022dcc86",null));e["default"]=_.exports},9603:function(t,e,n){"use strict";var a=n("f85c"),s=n.n(a);s.a},"99af":function(t,e,n){"use strict";var a=n("23e7"),s=n("d039"),i=n("e8b5"),o=n("861d"),r=n("7b0b"),c=n("50c4"),u=n("8418"),l=n("65f0"),d=n("1dde"),f=n("b622"),p=n("2d00"),m=f("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=p>=51||!s((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),_=d("concat"),y=function(t){if(!o(t))return!1;var e=t[m];return void 0!==e?!!e:i(t)},x=!g||!_;a({target:"Array",proto:!0,forced:x},{concat:function(t){var e,n,a,s,i,o=r(this),d=l(o,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(i=-1===e?o:arguments[e],y(i)){if(s=c(i.length),f+s>h)throw TypeError(v);for(n=0;n<s;n++,f++)n in i&&u(d,f,i[n])}else{if(f>=h)throw TypeError(v);u(d,f++,i)}return d.length=f,d}})},"9e62":function(t,e,n){},c8d2:function(t,e,n){var a=n("d039"),s=n("5899"),i="​᠎";t.exports=function(t){return a((function(){return!!s[t]()||i[t]()!=i||s[t].name!==t}))}},d178:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w"},[n("div",{staticClass:"nev"},[n("span",{staticClass:"iconfont iconjiantou2",on:{click:function(e){return t.$router.back()}}}),n("strong",[t._v(t._s(t.title))]),t.showHome?n("span",{staticClass:"iconfont iconshouye",on:{click:function(e){return t.$router.push("/index")}}}):n("span",{staticClass:"iconfont iconshouye",staticStyle:{opacity:"0"}})])])},s=[],i={props:["title","showHome"]},o=i,r=(n("2165"),n("2877")),c=Object(r["a"])(o,a,s,!1,null,"60a28f66",null);e["a"]=c.exports},ea77:function(t,e,n){"use strict";var a=n("9e62"),s=n.n(a);s.a},f85c:function(t,e,n){}}]);
//# sourceMappingURL=chunk-062c9f10.60a2d3d7.js.map